(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{461:function(t,s,a){"use strict";a.r(s);var n=a(31),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"语义高亮指南"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语义高亮指南"}},[t._v("#")]),t._v(" 语义高亮指南")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("语义高亮是对"),a("a",{attrs:{href:"/language-extensions/syntax-highlight-guide"}},[t._v("语法高亮")]),t._v("的一种补充。VS Code 的主要分词引擎是 TextMate 语法器。TextMate 使用正则表达式，并根据词法规则将文件分割成一系列的符号。")]),t._v(" "),a("p",[t._v("语言服务器将项目上下文的符号进行解析，使得语义服务器也能提供"),a("strong",[t._v("符号")]),t._v("的相关信息。主题可以选择性地使用语义符号来提升语法高亮的体验。编辑器使用语义高亮优先于语法高亮。")]),t._v(" "),a("p",[t._v("下面是一个语义高亮的例子：")]),t._v(" "),a("p",[t._v("没有语义高亮：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://code.visualstudio.com/assets/api/language-extensions/semantic-highlighting/no-semantic-highlighting.png",alt:"no-semantic-highlighting"}})]),t._v(" "),a("p",[t._v("有语义高亮：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://code.visualstudio.com/assets/api/language-extensions/semantic-highlighting/with-semantic-highlighting.png",alt:"with-semantic-highlighting"}})]),t._v(" "),a("p",[t._v("注意下列颜色差异：")]),t._v(" "),a("ul",[a("li",[t._v("第 10 行："),a("code",[t._v("languageMode")]),t._v(" 被着色为参数")]),t._v(" "),a("li",[t._v("第 11 行："),a("code",[t._v("Range")]),t._v(" 和 "),a("code",[t._v("Position")]),t._v(" 被着色为“类”，"),a("code",[t._v("document")]),t._v(" 被着色为参数")]),t._v(" "),a("li",[t._v("第 13 行："),a("code",[t._v("getFoldingRanges")]),t._v(" 着色为函数")])]),t._v(" "),a("h2",{attrs:{id:"语义分词供应器函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语义分词供应器函数"}},[t._v("#")]),t._v(" 语义分词供应器函数")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("要实现语义高亮，插件需要使用文档的语言类型或文件名注册一个 "),a("code",[t._v("semantic token provider")]),t._v("。编辑器发现需要进行语义分词时，会向该供应器发起请求。")]),t._v(" "),a("div",{staticClass:"language-typescript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tokenTypes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'class'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'interface'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'enum'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'variable'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tokenModifiers "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'declaration'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'documentation'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" legend "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("vscode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SemanticTokensLegend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tokenTypes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tokenModifiers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" provider"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vscode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DocumentSemanticTokensProvider "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("provideDocumentSemanticTokens")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    document"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vscode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TextDocument\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vscode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ProviderResult"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("vscode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SemanticTokens"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分析文档，并返回语义符号")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tokensBuilder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("vscode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SemanticTokensBuilder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("legend"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第一行的1-5个词，是类型声明")]),t._v("\n    tokensBuilder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("vscode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Range")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("vscode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Position")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("vscode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Position")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'class'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'declaration'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" tokensBuilder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" selector "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" language"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'java'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" scheme"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为所有本地的 Java 文档注册")]),t._v("\n\nvscode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("languages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerDocumentSemanticTokensProvider")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" provider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" legend"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br")])]),a("p",[t._v("语义分词供应器函数 API 为插件实现提供了两种方式：")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("DocumentSemanticTokensProvider")]),t._v(" - 将整个文档作为输入内容\n"),a("ul",[a("li",[a("code",[t._v("provideDocumentSemanticTokens")]),t._v(" - 为文档提供所有"),a("strong",[t._v("符号")])]),t._v(" "),a("li",[a("code",[t._v("provideDocumentSemanticTokensEdits")]),t._v(" - 对上次响应提供文档的所有"),a("strong",[t._v("符号")])])])]),t._v(" "),a("li",[a("code",[t._v("DocumentRangeSemanticTokensProvider")]),t._v(" - 只作用于局部范围\n"),a("ul",[a("li",[a("code",[t._v("provideDocumentRangeSemanticTokens")]),t._v(" - 为局部文档提供所有"),a("strong",[t._v("符号")])])])])]),t._v(" "),a("p",[t._v("每个被供应器函数返回的"),a("strong",[t._v("符号")]),t._v("都会含有分类信息，分类信息中包含了符号的类型、修改的符号数量、符号的具体语言等。这个信息和 "),a("a",{attrs:{href:"/language-extensions/syntax-highlight-guide"}},[t._v("语法高亮")]),t._v(" 中的 TextMate 作用域生成的信息很像，不过它有自己专属的更干净的分类系统。")]),t._v(" "),a("p",[t._v("就如上例所示，这个供应器命名了类型和具体修改，这些东西随后就会被"),a("code",[t._v("SemanticTokensLegend")]),t._v("使用，"),a("code",[t._v("provide")]),t._v(" api 将类型和具体修改作为下标返回给 legend。")]),t._v(" "),a("h2",{attrs:{id:"语义分词种类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语义分词种类"}},[t._v("#")]),t._v(" 语义分词种类")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("下面是一些VS Code 预定义的标准"),a("strong",[t._v("语义符号类型")]),t._v("和"),a("strong",[t._v("语义符号修饰器")])]),t._v(" "),a("p",[t._v("标准类型和修饰器覆盖了很多语言中常见的概念，虽然很多语言都有自己的类型和修饰器术语，但是有了标准分类之后，主题开发者也能够根据这套标准实现跨语言的主题了。")]),t._v(" "),a("p",[t._v("标准语义符号类型：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Id")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("namespace")])]),t._v(" "),a("td",[t._v("声明或引用了一个命名空间、模块或包")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("class")])]),t._v(" "),a("td",[t._v("声明或引用了一个“类”类型")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("enum")])]),t._v(" "),a("td",[t._v("声明或引用了一个枚举类型")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("interface")])]),t._v(" "),a("td",[t._v("声明或引用了一个接口类型")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("struct")])]),t._v(" "),a("td",[t._v("声明或引用了一个结构类型")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("typeParameter")])]),t._v(" "),a("td",[t._v("声明或引用了一个类型参数")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("type")])]),t._v(" "),a("td",[t._v("声明或引用了一个未被上述类型提及的其他类型")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("parameter")])]),t._v(" "),a("td",[t._v("声明或引用了一个函数或方法的参数")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("variable")])]),t._v(" "),a("td",[t._v("声明或引用了一个本地或全局变量")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("property")])]),t._v(" "),a("td",[t._v("声明或引用了一个成员属性，成员域或成员变量")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("enumMember")])]),t._v(" "),a("td",[t._v("声明或引用了一个可枚举的属性、常量或成员")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("event")])]),t._v(" "),a("td",[t._v("声明或引用了一个可枚举的属性")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("function")])]),t._v(" "),a("td",[t._v("声明或引用了一个函数")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("method")])]),t._v(" "),a("td",[t._v("声明或引用了一个函数或方法")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("macro")])]),t._v(" "),a("td",[t._v("声明或引用了一个宏")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("label")])]),t._v(" "),a("td",[t._v("声明或引用了一个标签")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("comment")])]),t._v(" "),a("td",[t._v("表示注释")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("string")])]),t._v(" "),a("td",[t._v("表示字符串字面量")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("keyword")])]),t._v(" "),a("td",[t._v("表示语言关键字")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("number")])]),t._v(" "),a("td",[t._v("表示数字字面量")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("regexp")])]),t._v(" "),a("td",[t._v("表示正则表达式字面量")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("operator")])]),t._v(" "),a("td",[t._v("表示操作符")])])])]),t._v(" "),a("p",[t._v("标准语义符号修饰符：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Id")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("declaration")])]),t._v(" "),a("td",[t._v("符号的声明")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("definition")])]),t._v(" "),a("td",[t._v("符号的定义，比如文件头")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("readonly")])]),t._v(" "),a("td",[t._v("只读变量或成员域，或称常量")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("static")])]),t._v(" "),a("td",[t._v("类成员中的静态成员对象")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("deprecated")])]),t._v(" "),a("td",[t._v("表示不再使用的符号")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("abstract")])]),t._v(" "),a("td",[t._v("表示类型或成员方法是抽象的")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("async")])]),t._v(" "),a("td",[t._v("被标记为异步的函数")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("modification")])]),t._v(" "),a("td",[t._v("被引用变量的原始赋值位置")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("documentation")])]),t._v(" "),a("td",[t._v("符号表示文档的位置")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("defaultLibrary")])]),t._v(" "),a("td",[t._v("符号表示标准库")])])])]),t._v(" "),a("p",[t._v("必要之时，插件也可以定义新的类型和修饰符，或者通过"),a("code",[t._v("semanticTokenTypes")]),t._v(" 和 "),a("code",[t._v("semanticTokenModifiers")]),t._v(" 配置点创建现有类型的子类型。")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"contributes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"semanticTokenTypes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"templateType"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"superType"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A template type."')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"semanticTokenModifiers"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"native"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Annotates a symbol that is implemented natively"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])]),a("p",[t._v("已配置的类型，可以声明它的父级类型，并继承其所有样式规则。")]),t._v(" "),a("h2",{attrs:{id:"主题化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主题化"}},[t._v("#")]),t._v(" 主题化")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("主题化是指将颜色和样式应用到 "),a("strong",[t._v("符号")]),t._v(" 的过程。色彩主题确定了主题化的规则，但是用户也可以通过用户设置来自定义主题规则。")]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("semanticHighlighting")]),t._v(" 时，色彩主题可以告诉编辑器是否展示"),a("strong",[t._v("语义符号")]),t._v("。")]),t._v(" "),a("p",[t._v("如果启用的话，语义符号会优先于"),a("code",[t._v("semanticTokenColors")]),t._v("定义的语义符号规则使用：")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"semanticTokenColors"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"variable.readonly:java"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#ff0000"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[a("code",[t._v("variable.readonly:java")]),t._v("被称为选择器，它的格式是"),a("code",[t._v("(*|tokenType)(.tokenModifier)*(:tokenLanguage)?")])]),t._v(" "),a("p",[t._v("这是一个样式选择器的例子：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v('"*.declaration": { "fontStyle": "bold" }')]),t._v(" : 所有声明都标记为粗体")]),t._v(" "),a("li",[a("code",[t._v('"class:java": { "foreground": "#00ff00" "fontStyle": "bold" }')]),t._v(" ：java 中的类")])]),t._v(" "),a("p",[t._v("如果没有匹配到任何规则，VS Code 会使用 "),a("a",{attrs:{href:"#%E8%AF%AD%E4%B9%89%E5%88%86%E8%AF%8D%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%98%A0%E5%B0%84"}},[t._v("语义分词作用域映射")]),t._v(" 将当前语义符号解析为 TextMate 的作用域。然后这个作用域会根据TextMate 主题规则中的 "),a("code",[t._v("tokenColors")]),t._v(" 进行匹配。")]),t._v(" "),a("h2",{attrs:{id:"语义分词作用域映射"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语义分词作用域映射"}},[t._v("#")]),t._v(" 语义分词作用域映射")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("为了使语义高亮在没有任何定义语义规则的主题中能够降级使用，VS Code 维护了一个映射表，将语义符号选择器映射到 TextMate 作用域。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("语义符号选择器")]),t._v(" "),a("th",[t._v("降级 TextMate Scope")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("namespace")])]),t._v(" "),a("td",[a("code",[t._v("entity.name.namespace")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("type")])]),t._v(" "),a("td",[a("code",[t._v("entity.name.type")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("type.defaultLibrary")])]),t._v(" "),a("td",[a("code",[t._v("support.type")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("struct")])]),t._v(" "),a("td",[a("code",[t._v("storage.type.struct")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("class")])]),t._v(" "),a("td",[a("code",[t._v("entity.name.type.class")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("class.defaultLibrary")])]),t._v(" "),a("td",[a("code",[t._v("support.class")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("interface")])]),t._v(" "),a("td",[a("code",[t._v("entity.name.type.interface")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("enum")])]),t._v(" "),a("td",[a("code",[t._v("entity.name.type.enum")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("function")])]),t._v(" "),a("td",[a("code",[t._v("entity.name.function")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("function.defaultLibrary")])]),t._v(" "),a("td",[a("code",[t._v("support.function")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("method")])]),t._v(" "),a("td",[a("code",[t._v("entity.name.function.member")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("macro")])]),t._v(" "),a("td",[a("code",[t._v("entity.name.function.macro")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("variable")])]),t._v(" "),a("td",[a("code",[t._v("variable.other.readwrite")]),t._v(" , "),a("code",[t._v("entity.name.variable")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("variable.readonly")])]),t._v(" "),a("td",[a("code",[t._v("variable.other.constant")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("variable.readonly.defaultLibrary")])]),t._v(" "),a("td",[a("code",[t._v("support.constant")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("parameter")])]),t._v(" "),a("td",[a("code",[t._v("variable.parameter")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("property")])]),t._v(" "),a("td",[a("code",[t._v("variable.other.property")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("property.readonly")])]),t._v(" "),a("td",[a("code",[t._v("variable.other.constant.property")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("enumMember")])]),t._v(" "),a("td",[a("code",[t._v("variable.other.enummember")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("event")])]),t._v(" "),a("td",[a("code",[t._v("variable.other.event")])])])])]),t._v(" "),a("p",[t._v("这份表可通过"),a("code",[t._v("semanticTokenScopes")]),t._v("配置点进行扩展。")]),t._v(" "),a("p",[t._v("我们来看两个例子")]),t._v(" "),a("ul",[a("li",[t._v("当主题未定义语义符号的主题规则时，插件定义了自定义的符号类型和符号修饰器给 TextMate 作用域作为降级方案。")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"contributes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"semanticTokenScopes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scopes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"templateType"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"entity.name.type.template"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("ul",[a("li",[t._v("TextMate 的供应器函数可以添加特定语言作用域，这样主题就可以针对特对语言实现具体的主题规则。")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"contributes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"semanticTokenScopes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"language"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"typescript"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scopes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"property.readonly"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"variable.other.constant.property.ts"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("h2",{attrs:{id:"试试看"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#试试看"}},[t._v("#")]),t._v(" 试试看")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("我们有一份 "),a("a",{attrs:{href:"https://github.com/microsoft/vscode-extension-samples/tree/master/semantic-tokens-sample",target:"_blank",rel:"noopener noreferrer"}},[t._v("语义符号示例"),a("OutboundLink")],1),t._v(" 展示了如何创建一个语义符号供应器函数。")]),t._v(" "),a("p",[a("a",{attrs:{href:"/language-extensions/syntax-highlight-guide#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%A3%80%E6%9F%A5%E5%99%A8"}},[t._v("作用域检查器")]),t._v(" 可以帮你查看一份源文件中展示了哪些语义符号，以及他们应用了什么规则。想要看到语义符号，你可以打开一个 TyepScript 文件，然后使用内置主题（比如 Dark+）。")])])}),[],!1,null,null,null);s.default=e.exports}}]);